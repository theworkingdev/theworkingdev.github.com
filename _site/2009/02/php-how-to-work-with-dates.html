<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>PHP How to work with dates | The Working Dev</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="PHP How to work with dates" />
<meta name="author" content="Ted Hagos" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Your programs will deal with date and times some of the time. On some occassions, the date and time data will be inputs coming from an html view. These inputs will be in string format which means you need to transform them to the appropriate date/time format before you can persist them to the database. On other occassions, you will read the date/time data from a database and then display them in the html view." />
<meta property="og:description" content="Your programs will deal with date and times some of the time. On some occassions, the date and time data will be inputs coming from an html view. These inputs will be in string format which means you need to transform them to the appropriate date/time format before you can persist them to the database. On other occassions, you will read the date/time data from a database and then display them in the html view." />
<link rel="canonical" href="http://localhost:4000/2009/02/php-how-to-work-with-dates.html" />
<meta property="og:url" content="http://localhost:4000/2009/02/php-how-to-work-with-dates.html" />
<meta property="og:site_name" content="The Working Dev" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2009-02-14T21:14:28+08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="PHP How to work with dates" />
<meta name="twitter:site" content="@lovescaffeine" />
<meta name="twitter:creator" content="@lovescaffeine" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Ted Hagos","url":"https://tedhagos.com"},"dateModified":"2009-02-14T21:14:28+08:00","datePublished":"2009-02-14T21:14:28+08:00","description":"Your programs will deal with date and times some of the time. On some occassions, the date and time data will be inputs coming from an html view. These inputs will be in string format which means you need to transform them to the appropriate date/time format before you can persist them to the database. On other occassions, you will read the date/time data from a database and then display them in the html view.","headline":"PHP How to work with dates","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2009/02/php-how-to-work-with-dates.html"},"url":"http://localhost:4000/2009/02/php-how-to-work-with-dates.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="The Working Dev" /><!-- Twitter cards -->
    <meta name= "twitter:site"    content = "@" />
    <meta name= "twitter:creator" content = "@" />
    <meta name= "twitter:title"   content = "PHP How to work with dates" />
  
    
    <meta name= "twitter:description" content = "A coding journal by Ted Hagos. Practical tutorials on Java, Kotlin, and  Android, now expanding into defensive coding and AI-assisted development  workflows. Grounded insights for the pragmatic programmer." />
    
  
    
    <meta name= "twitter:card"  content = "summary_large_image" />
    <meta name= "twitter:image" content = "https://workingdev.net/images/gandalf-programmer.jpg" />
    
    <!-- end of Twitter cards -->
</head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">The Working Dev</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a><a class="page-link" href="/blog/">Blog</a><a class="page-link" href="/subscribe/">Subscribe</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "PHP How to work with dates",
  "author": {
    "@type": "Person",
    "name": "Ted Hagos",
    "jobTitle": "CTO and Technical Author",
    "description": "CTO of RenditionDigital International for 21 years, technical author of 8 Apress books, and software development instructor.",
    "worksFor": {
      "@type": "Organization",
      "name": "RenditionDigital International"
    },
    "url": "https://tedhagos.com",
    "sameAs": [
      "https://www.linkedin.com/in/ted-hagos",
      "https://www.amazon.com/author/tedhagos",
      "https://github.com/tedhagos"
    ]
  }
}
</script>





<article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">PHP How to work with dates</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2009-02-14T21:14:28+08:00" itemprop="datePublished">Feb 14, 2009
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>Your programs will deal with date and times some of the time. On some occassions, the date and time data will be inputs coming from an html view. These inputs will be in string format which means you need to transform them to the appropriate date/time format before you can persist them to the database. On other occassions,  you will read the date/time data from a database and then display them in the html view.</p>

<p>There are two functions that will be handy when you need to work with date and times, these are the <code class="language-plaintext highlighter-rouge">date</code> and <code class="language-plaintext highlighter-rouge">strtotime</code> functions.</p>

<h3 id="handling-date-inputs-in-a-form">Handling date Inputs in a form</h3>

<p>The code below will extract the data from the <code class="language-plaintext highlighter-rouge">inputdate</code> element sent from an html form.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">date</span> <span class="o">=</span> <span class="nb">date</span><span class="p">(</span><span class="s1">'Y-m-d'</span><span class="p">,</span> <span class="nb">strtotime</span><span class="p">(</span><span class="n">_POST</span><span class="p">[</span><span class="s2">"inputdate"</span><span class="p">]));</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">strtotime</code> function by itself may not be enough. You will need to use it in tandem with the <code class="language-plaintext highlighter-rouge">date</code> function; <code class="language-plaintext highlighter-rouge">strtotime</code> takes a date or time data in string format and converts it to a UNIX timestamp. This timestamp is an integer value which represents the number of seconds that has elapsed since January 1 1970 (UTC). This timestamp is also known as POSIX time or epoch time.</p>

<p>The <code class="language-plaintext highlighter-rouge">date</code> function needs 2 parameters. The second parameter is a timestamp data, that was why we needed the <code class="language-plaintext highlighter-rouge">strtotime</code> function, and  the first parameter is a string that will dictate how the date information will be formatted. Here are some common usage of <strong>date</strong> and <strong>strtotime</strong>.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">echo</span> <span class="nb">date</span><span class="p">(</span><span class="s1">'Y-m-d'</span><span class="p">,</span> <span class="nb">strtotime</span><span class="p">(</span><span class="s2">"now"</span><span class="p">));</span> <span class="c1">// 2015-05-09</span>
<span class="k">echo</span> <span class="nb">date</span><span class="p">(</span><span class="s1">'m-d-Y'</span><span class="p">,</span> <span class="nb">strtotime</span><span class="p">(</span><span class="s2">"now"</span><span class="p">));</span> <span class="c1">// 05-09-2015</span>
<span class="k">echo</span> <span class="nb">date</span><span class="p">(</span><span class="s1">'l, M d, Y'</span><span class="p">,</span> <span class="nb">strtotime</span><span class="p">(</span><span class="s2">"now"</span><span class="p">));</span> <span class="c1">// Saturday, May 09, 2015</span>
</code></pre></div></div>

<p>There are many format characters that you can use, head over to the documentation page for a full listing, they are listed on references section below.</p>

<h3 id="presenting-date-output-to-a-view">Presenting date output to a View</h3>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$query</span> <span class="o">=</span> <span class="s2">"SELECT username, workdate, timein, timeout FROM attendance"</span><span class="p">;</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">cn</span><span class="o">-&gt;</span><span class="nf">query</span><span class="p">(</span><span class="nv">$query</span><span class="p">);</span>
<span class="n">row</span> <span class="o">=</span> <span class="n">result</span><span class="o">-&gt;</span><span class="nf">fetch_assoc</span><span class="p">();</span>

<span class="k">while</span><span class="p">(</span><span class="n">row</span> <span class="o">=</span> <span class="n">result</span><span class="o">-&gt;</span><span class="nf">fetch_assoc</span><span class="p">()){</span>
  <span class="k">echo</span> <span class="nb">date</span><span class="p">(</span><span class="s1">'m-d-Y'</span><span class="p">,</span><span class="nv">$row</span><span class="p">[</span><span class="s1">'workdate'</span><span class="p">]);</span>
  <span class="k">echo</span> <span class="nb">date</span><span class="p">(</span><span class="s1">'H:i'</span><span class="p">,</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">'timein'</span><span class="p">]);</span>
  <span class="k">echo</span> <span class="nb">date</span><span class="p">(</span><span class="s1">'H:i'</span><span class="p">,</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">'timeout'</span><span class="p">]);</span>
<span class="p">}</span>
 
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">H:i</code> time format will echo the time date in 24 hour format. If you need to display it in 12 hour format, use the <code class="language-plaintext highlighter-rouge">g:i a</code> formatter.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">echo</span> <span class="nb">date</span><span class="p">(</span><span class="s1">'H:i'</span><span class="p">,</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">'timein'</span><span class="p">]);</span>   <span class="c1">// 21:17</span>
<span class="k">echo</span> <span class="nb">date</span><span class="p">(</span><span class="s1">'g:i'</span><span class="p">,</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">'timein'</span><span class="p">]);</span>   <span class="c1">// 9:17</span>
<span class="k">echo</span> <span class="nb">date</span><span class="p">(</span><span class="s1">'g:i a'</span><span class="p">,</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">'timein'</span><span class="p">]);</span> <span class="c1">// 9:17 pm</span>

</code></pre></div></div>

<h3 id="formatting-dates-using-mysql-database-functions">Formatting dates using mysql database functions</h3>

<p>The PHP <code class="language-plaintext highlighter-rouge">date</code> function is very flexible and allows to do lots of things already. For most situations formatting a date variable using PHP functions will suffice. There might be situations when this approach can be tedious.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$returnarray</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
<span class="nv">$query</span> <span class="o">=</span> <span class="s2">"SELECT username, workdate, timein, timeout FROM attendance"</span><span class="p">;</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">cn</span><span class="o">-&gt;</span><span class="nf">query</span><span class="p">(</span><span class="nv">$query</span><span class="p">);</span>
<span class="n">row</span> <span class="o">=</span> <span class="n">result</span><span class="o">-&gt;</span><span class="nf">fetch_assoc</span><span class="p">();</span>

<span class="k">while</span><span class="p">(</span><span class="n">row</span> <span class="o">=</span> <span class="n">result</span><span class="o">-&gt;</span><span class="nf">fetch_assoc</span><span class="p">()){</span>
  <span class="n">workdate</span> <span class="o">=</span> <span class="nb">date</span><span class="p">(</span><span class="s1">'m-d-Y'</span><span class="p">,</span><span class="n">row</span><span class="p">[</span><span class="s1">'workdate'</span><span class="p">]);</span>
  <span class="n">timein</span> <span class="o">=</span> <span class="nb">date</span><span class="p">(</span><span class="s1">'H:i'</span><span class="p">,</span> <span class="n">row</span><span class="p">[</span><span class="s1">'timein'</span><span class="p">]);</span>
  <span class="n">timeout</span> <span class="o">=</span> <span class="nb">date</span><span class="p">(</span><span class="s1">'H:i'</span><span class="p">,</span> <span class="n">row</span><span class="p">[</span><span class="s1">'timeout'</span><span class="p">]);</span>
  <span class="nb">array_push</span><span class="p">(</span><span class="n">returnarray</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">'workdate'</span><span class="o">=&gt;</span> <span class="n">workdate</span><span class="p">,</span> <span class="mf">...</span><span class="p">));</span>
<span class="p">}</span>

<span class="k">echo</span> <span class="nb">json_encode</span><span class="p">(</span><span class="nv">$returnarray</span><span class="p">);</span>

</code></pre></div></div>

<p>The code sample above reads the the attendance record, formats it and then aggregates each record into an associative before echoing  it so than an AJAX client may consume it. The only reason we parsed the columns is so that the date/time data can be properly formatted. If we didn’t need to format it, the code could have been written like the sample below.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$returnarray</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
<span class="nv">$query</span> <span class="o">=</span> <span class="s2">"SELECT username, workdate, timein, timeout FROM attendance"</span><span class="p">;</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">cn</span><span class="o">-&gt;</span><span class="nf">query</span><span class="p">(</span><span class="nv">$query</span><span class="p">);</span>
<span class="n">row</span> <span class="o">=</span> <span class="n">result</span><span class="o">-&gt;</span><span class="nf">fetch_assoc</span><span class="p">();</span>

<span class="k">while</span><span class="p">(</span><span class="n">row</span> <span class="o">=</span> <span class="n">result</span><span class="o">-&gt;</span><span class="nf">fetch_assoc</span><span class="p">()){</span>
  <span class="nb">array_push</span><span class="p">(</span><span class="n">returnarray</span><span class="p">,</span> <span class="n">row</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">echo</span> <span class="nb">json_encode</span><span class="p">(</span><span class="nv">$returnarray</span><span class="p">);</span>

</code></pre></div></div>

<p>In these situations, we can do the date formatting on the database level rather than on the application level. MySQL has built-in functions that can be used for date transformations.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$returnarray</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
<span class="nv">$query</span> <span class="o">=</span> <span class="s2">"SELECT username,
          DATE_FORMAT(workdate, '%d.%m.%Y'),
          DATE_FORMAT(timein, '%h:%i %p'),
          DATE_FORMAT(timeout, '%h:%i %p')
          FROM attendance"</span><span class="p">;</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">cn</span><span class="o">-&gt;</span><span class="nf">query</span><span class="p">(</span><span class="nv">$query</span><span class="p">);</span>
<span class="n">row</span> <span class="o">=</span> <span class="n">result</span><span class="o">-&gt;</span><span class="nf">fetch_assoc</span><span class="p">();</span>

<span class="k">while</span><span class="p">(</span><span class="n">row</span> <span class="o">=</span> <span class="n">result</span><span class="o">-&gt;</span><span class="nf">fetch_assoc</span><span class="p">()){</span>
  <span class="nb">array_push</span><span class="p">(</span><span class="n">returnarray</span><span class="p">,</span> <span class="n">row</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">echo</span> <span class="nb">json_encode</span><span class="p">(</span><span class="nv">$returnarray</span><span class="p">);</span>

</code></pre></div></div>

<p>The issue with this approach is that the resulting code might not be portable because we did use a specific function of MySQL. This might not work for other databases.</p>

<p>The <code class="language-plaintext highlighter-rouge">DATE_FORMAT</code> function has quite a lot of format specifiers, you can find the details of the format specifiers in MySQL documentation page which is listed on the references section.</p>

<h3 id="references">References</h3>

<ol>
  <li>PHP.net/manual <a href="http://php.net/manual/en/function.strtotime.php">strtotime</a></li>
  <li>PHP.net/manual <a href="http://php.net/manual/en/function.date.php">Date</a></li>
  <li>Dev.MySQL <a href="https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format">Doc/Date and Time Functions</a></li>
</ol>


  </div>


  <!--
  <hr class="post-divider" />

  <div class="subscribe-cta">
    <p>
      If you liked this, I write short essays on software development and programming careers.
      <a href="https://tedhagos.kit.com/ab4b864482"
         target="_blank"
         rel="noopener">
        Subscribe here →
      </a>
    </p>
  </div>
  -->

  <div class="card" style="width: 22rem;">
    <div class="card-body">
      <h4 class="card-title">Get the Newsletter</h4>
      <p class="card-text">
      If you liked this, I write short essays on software development and programming careers.
    </p>
      <a target="_blank"href="https://tedhagos.kit.com/ab4b864482" class="btn btn-info">SUBSCRIBE</a>
    </div>
  </div>

  
<!--
  <div class="discussion">
    If you find any corrections in the page or article, the best place to log that is in the site's GitHub repo <a href="https://github.com/theworkingdev/theworkingdev.github.com/issues">workingdev.net/issues</a>. To start a discussion with me, the best place to do that is via twitter <a href="http://twitter/lovescaffeine">@lovescaffeine</a>
  </div>
-->

  <a class="u-url" href="/2009/02/php-how-to-work-with-dates.html" hidden></a>
</article>

<p/>

<footer class="author-bio" style="margin-top: 30px; font-size: 0.95em; color: #333;">
  <p>
    <strong>Ted Hagos</strong> is the CTO of <a href="https://www.renditiondigital.com/">RenditionDigital International</a>, 
    where he has led technology strategy for over 21 years. He has authored eight books for 
    <strong>Apress</strong> on subjects ranging from Android Studio and IntelliJ to Kotlin for Spring. 
    You can find more of his technical insights at <a href="https://tedhagos.com" class="u-url">tedhagos.com</a>.
  </p>
</footer>


      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>


  <!--
  <div class="wrapper">

    <h2 class="footer-heading">The Working Dev</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">{&quot;name&quot;=&gt;&quot;Ted Hagos&quot;, &quot;url&quot;=&gt;&quot;https://tedhagos.com&quot;, &quot;twitter&quot;=&gt;&quot;lovescaffeine&quot;, &quot;description&quot;=&gt;&quot;CTO, author of 8 Apress books, and technical educator.&quot;, &quot;links&quot;=&gt;[&quot;https://www.amazon.com/author/tedhagos&quot;, &quot;https://twitter.com/lovescaffeine&quot;]}</li><li><a class="u-email" href="mailto:tedhagos@gmail.com">tedhagos@gmail.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/tedhagos"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">tedhagos</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>A coding journal by Ted Hagos. Practical tutorials on Java, Kotlin, and  Android, now expanding into defensive coding and AI-assisted development  workflows. Grounded insights for the pragmatic programmer.</p>
      </div>
    </div>

  </div>
  -->

</footer>
</body>

</html>
